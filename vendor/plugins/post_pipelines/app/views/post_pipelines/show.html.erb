<h2>RNA-Seq Pipeline <i><%= @post_pipeline.name%></i></h2>

<p>
  <b>Sample:</b>
  <%= link_to @post_pipeline.sample.sample_mixture.name_on_tube, edit_sample_mixture_path(@post_pipeline.sample) %>
</p>

<p>
  <b>Flow Cell:</b>
  <%= link_to @post_pipeline.flow_cell_lane.lane_number, @post_pipeline.flow_cell_lane %>
</p>

<p>
  <b>Working directory:</b>
  <%= @post_pipeline.working_dir %>
</p>

<p>
  <b>ELAND export file:</b>
  <%= @post_pipeline.export_file %>
</p>

<p>
  <b>Alignment algorithm:</b>
  <%=h @post_pipeline.sample.sample_mixture.post_pipeline_aligner %>
</p>

<p>
  <b>Alignment algorithm parameters:</b>
  <%=h @post_pipeline.align_params %>
</p>

<p>
  <b>Max mismatches:</b>
  <%=h @post_pipeline.max_mismatches %>
</p>

<p>
  <b>Status:</b>
  <%=h @post_pipeline.status %>
</p>

<% if @post_pipeline.status == 'Finished' %>

<p>
  <b>Stats:</b>
  <%= @post_pipeline.stats.nil? ? 'missing stats or gene file' : render(:partial=>'stats', :locals=>{:stats=>@post_pipeline.stats}) %>
</p>

<p>
  <b>Log Files:</b><ul>
  <li><b>Output:</b> <%= @post_pipeline.working_dir %>/<%= @post_pipeline.label %>.out</li>
  <li><b>Error:</b> <%= @post_pipeline.working_dir %>/<%= @post_pipeline.label %>.err</li>
</ul></p>

<% if @post_pipeline.runtype == 0 %>
<% elsif @post_pipeline.runtype == 1 %>
<p>
  <b>Final RPKM File:</b>
  <%= @post_pipeline.working_dir %>/rds/<%= File.basename(@post_pipeline.export_file) %>.final.rpkm
</p>

<p>
  <b>ERCC Normalized Output:</b>
  <%= @post_pipeline.working_dir %>/<%= File.basename(@post_pipeline.export_file) %>.bowtie.normalized
</p>

<% end %>

<% end %>

<%= link_to 'All pipelines', post_pipelines_path %>
