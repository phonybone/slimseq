<h3>Post-processing Pipeine for Samples in Experiment <%=h @experiment.name %></h3>
<% form_for :post_pipeline, :url=>{:controller=>:post_pipelines, :action=>:launch, :id=>nil} do |form| %>
<p>Description: <%=h @experiment.description %></p>
<p>Choose the samples to process:</p>
<ul><% @samples.each do |s| %>
  <li>
    <input type='checkbox' name='include_sample[]' value='<%= s.id %>' checked='1'/>
    <%=h s.name_on_tube %>

    <% if false %>
    <%= s.post_pipelines.inspect %>
    <% pps=s.post_pipelines; 
       pps.each do |pp| %>
    &nbsp;
    <%=h pp.status %>
    <% end %>
    <% end %>
</li>
<% end %></ul>
<h3>Pipeline Parameters:</h3>
<div>
  Max. alignnment mismatches: &nbsp;
  <%= radio_button :post_pipeline, :max_mismatches, 1, {:checked=>true} %>
  <%= label_tag :max_mismatches, 1  %>

  <%= radio_button :post_pipeline, :max_mismatches, 2 %>
  <%= label_tag(:max_mismatches, 2) %>

  <%= radio_button :post_pipeline, :max_mismatches, 3 %>
  <%= label_tag(:max_mismatches, 3) %>
</div>
<div>
<!-- I swear to god I tried to use the select helper and couldn't get it to work -->
Run type: <select name='post_pipeline[type]'><% i=0; PostPipeline.type_names.each do |t| %>
<option value='<%= i %>'><%= t %> </option>
<% i+=1; end %>
</select>
</div>
<p><%= form.submit "Launch Pipeline" %></p>
<% end %>
